<?php include '../includes/header.php'; ?>

<!-- NEWS PAGE HERO -->
<section class="relative bg-cover bg-center h-[40vh] md:h-[50vh]" style="background-image:url('../assets/images/news-hero.png');">
    <div class="absolute inset-0 bg-black bg-opacity-60"></div>
    <div class="relative z-10 max-w-7xl mx-auto px-4 md:px-6 h-full flex flex-col justify-center">
        <div class="text-white">
            <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4">ELECT News & Updates</h1>
            <p class="text-lg md:text-xl max-w-2xl">Stay updated with the latest developments, events, and achievements from the Energy Efficient Lighting project.</p>
        </div>
    </div>
</section>

<!-- BREADCRUMB -->
<div class="bg-gray-100 py-4">
    <div class="max-w-7xl mx-auto px-4 md:px-6">
        <nav class="flex items-center space-x-2 text-sm">
            <a href="../index.php" class="text-blue-600 hover:text-blue-800">Home</a>
            <span class="text-gray-400">/</span>
            <span class="text-gray-600">News & Updates</span>
        </nav>
    </div>
</div>

<!-- MAIN NEWS CONTENT -->
<section class=" md:py-16 bg-white">
    <div class="md:max-w-7xl mx-auto md:px-6">
        <!-- Page Header -->
        <div class="border-b-4 border-[#fdbf30] pb-6 px-4 mb-8 md:mb-12">
            <h2 class="text-2xl md:text-3xl font-bold text-gray-900">All News Stories</h2>
            <p class="text-gray-600 mt-2 text-sm md:text-base">Browse through our comprehensive collection of news articles, updates, and announcements.</p>
            
            <!-- Filter Tabs - Mobile responsive -->
            <div class="flex flex-wrap gap-2 mt-4 md:mt-6 text-center overflow-x-auto pb-2">
                <button class="filter-btn active whitespace-nowrap px-3 py-1.5 md:px-4 md:py-2 bg-[#247646] text-white rounded-lg font-medium transition-colors text-sm md:text-base" data-filter="all">
                    All News
                </button>
                <button class="filter-btn whitespace-nowrap px-3 py-1.5 md:px-4 md:py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors text-sm md:text-base" data-filter="research">
                    Research
                </button>
                <button class="filter-btn whitespace-nowrap px-3 py-1.5 md:px-4 md:py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors text-sm md:text-base" data-filter="events">
                    Events
                </button>
                <button class="filter-btn whitespace-nowrap px-3 py-1.5 md:px-4 md:py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors text-sm md:text-base" data-filter="training">
                    Training
                </button>
                <button class="filter-btn whitespace-nowrap px-3 py-1.5 md:px-4 md:py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors text-sm md:text-base" data-filter="publications">
                    Publications
                </button>
                <button class="filter-btn whitespace-nowrap px-3 py-1.5 md:px-4 md:py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors text-sm md:text-base" data-filter="collaboration">
                    Collaboration
                </button>
            </div>
        </div>
        
        <!-- Search and Sort -->
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center px-4 mb-6 md:mb-8 gap-4">
            <div class="relative w-full">
                <input type="text" id="searchNews" placeholder="Search news..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#fdbf30] focus:border-transparent text-sm md:text-base">
                <i class="fas fa-search absolute right-3 top-3 text-gray-400"></i>
            </div>
            
            <div class="flex items-center space-x-2 md:space-x-4 w-full md:w-auto">
                <span class="text-gray-600 text-sm md:text-base">Sort by:</span>
                <select id="sortNews" class="px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-[#fdbf30] focus:border-transparent text-sm md:text-base w-full md:w-auto">
                    <option value="newest">Newest First</option>
                    <option value="oldest">Oldest First</option>
                    <option value="popular">Most Popular</option>
                </select>
            </div>
        </div>
        
        <!-- News Grid -->
        <div id="newsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
            <!-- News Item 1 -->
            <article class="news-item md:rounded overflow-hidden border border-gray-200" data-category="research" data-date="2024-03-15" data-views="1245">
                <div class="relative w-full">
                    <img src="../assets/images/news1.jpg" alt="Research Publication" class="w-full h-48 md:h-48 object-cover">
                </div>
                <div class="p-4 md:p-6">
                    <div class="flex flex-wrap items-center text-xs md:text-sm text-gray-500 mb-3 gap-1 md:gap-0">
                        <i class="fas fa-calendar-alt mr-1 md:mr-2"></i>
                        <span>March 15, 2024</span>
                        <span class="mx-1 md:mx-2">•</span>
                        <i class="fas fa-eye mr-1 md:mr-2"></i>
                        <span>1,245 views</span>
                    </div>
                    <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-3 hover:text-[#247646] transition-colors">
                        <a href="news-detail.php?id=1">New Study Reveals 45% Energy Savings with LED Retrofits</a>
                    </h3>
                    <p class="text-gray-600 mb-4 text-sm md:text-base">
                        Our latest research shows significant energy savings can be achieved through systematic LED retrofits in educational institutions.
                    </p>
                    <a href="news-detail.php?id=1" class="inline-flex items-center text-[#fdbf30] font-semibold hover:text-[#247646] transition-colors text-sm md:text-base">
                        Read Full Story
                    </a>
                </div>
                <!-- Fade line separator -->
                <div class="h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent w-full mt-4 md:hidden"></div>
            </article>
            
            <!-- News Item 2 -->
            <article class="news-item md:rounded overflow-hidden border border-gray-200 transition duration-300" data-category="events" data-date="2024-03-10" data-views="987">
                <div class="relative w-full">
                    <img src="../assets/images/news2.jpg" alt="Workshop Event" class="w-full h-48 md:h-48 object-cover">
                </div>
                <div class="p-4 md:p-6">
                    <div class="flex flex-wrap items-center text-xs md:text-sm text-gray-500 mb-3 gap-1 md:gap-0">
                        <i class="fas fa-calendar-alt mr-1 md:mr-2"></i>
                        <span>March 10, 2024</span>
                        <span class="mx-1 md:mx-2">•</span>
                        <i class="fas fa-eye mr-1 md:mr-2"></i>
                        <span>987 views</span>
                    </div>
                    <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-3 hover:text-[#247646] transition-colors">
                        <a href="news-detail.php?id=2">Successful Completion of Energy Efficiency Workshop</a>
                    </h3>
                    <p class="text-gray-600 mb-4 text-sm md:text-base">
                        Over 50 participants from Zambian universities attended our hands-on workshop on energy-efficient lighting technologies.
                    </p>
                    <a href="news-detail.php?id=2" class="inline-flex items-center text-[#fdbf30] font-semibold hover:text-[#247646] transition-colors text-sm md:text-base">
                        Read Full Story
                    </a>
                </div>
                <!-- Fade line separator -->
                <div class="h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent w-full mt-4 md:hidden"></div>
            </article>
            
            <!-- News Item 3 -->
            <article class="news-item md:rounded overflow-hidden border border-gray-200 transition duration-300" data-category="training" data-date="2024-03-05" data-views="1542">
                <div class="relative w-full">
                    <img src="../assets/images/news3.jpg" alt="Training Program" class="w-full h-48 md:h-48 object-cover">
                </div>
                <div class="p-4 md:p-6">
                    <div class="flex flex-wrap items-center text-xs md:text-sm text-gray-500 mb-3 gap-1 md:gap-0">
                        <i class="fas fa-calendar-alt mr-1 md:mr-2"></i>
                        <span>March 5, 2024</span>
                        <span class="mx-1 md:mx-2">•</span>
                        <i class="fas fa-eye mr-1 md:mr-2"></i>
                        <span>1,542 views</span>
                    </div>
                    <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-3 hover:text-[#247646] transition-colors">
                        <a href="news-detail.php?id=3">New Training Program for University Lecturers Launched</a>
                    </h3>
                    <p class="text-gray-600 mb-4 text-sm md:text-base">
                        ELECT launches comprehensive training program aimed at building capacity among university lecturers in energy-efficient lighting.
                    </p>
                    <a href="news-detail.php?id=3" class="inline-flex items-center text-[#fdbf30] font-semibold hover:text-[#247646] transition-colors text-sm md:text-base">
                        Read Full Story
                    </a>
                </div>
                <!-- Fade line separator -->
                <div class="h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent w-full mt-4 md:hidden"></div>
            </article>
            
            <!-- News Item 4 -->
            <article class="news-item md:rounded overflow-hidden border border-gray-200 transition duration-300" data-category="collaboration" data-date="2024-02-28" data-views="2134">
                <div class="relative w-full">
                    <img src="../assets/images/hero.jpg" alt="EU Collaboration" class="w-full h-48 md:h-48 object-cover">
                </div>
                <div class="p-4 md:p-6">
                    <div class="flex flex-wrap items-center text-xs md:text-sm text-gray-500 mb-3 gap-1 md:gap-0">
                        <i class="fas fa-calendar-alt mr-1 md:mr-2"></i>
                        <span>February 28, 2024</span>
                        <span class="mx-1 md:mx-2">•</span>
                        <i class="fas fa-eye mr-1 md:mr-2"></i>
                        <span>2,134 views</span>
                    </div>
                    <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-3 hover:text-[#247646] transition-colors">
                        <a href="news-detail.php?id=4">EU Delegation Commends Project Progress During Site Visit</a>
                    </h3>
                    <p class="text-gray-600 mb-4 text-sm md:text-base">
                        European Union representatives visited partner universities to assess project implementation and expressed satisfaction with progress.
                    </p>
                    <a href="news-detail.php?id=4" class="inline-flex items-center text-[#fdbf30] font-semibold hover:text-[#247646] transition-colors text-sm md:text-base">
                        Read Full Story
                    </a>
                </div>
                <!-- Fade line separator -->
                <div class="h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent w-full mt-4 md:hidden"></div>
            </article>
            
            <!-- News Item 5 -->
            <article class="news-item md:rounded overflow-hidden border border-gray-200 transition duration-300" data-category="publications" data-date="2024-02-20" data-views="876">
                <div class="relative w-full">
                    <img src="../assets/images/hero.jpg" alt="Research Publication" class="w-full h-48 md:h-48 object-cover">
                </div>
                <div class="p-4 md:p-6">
                    <div class="flex flex-wrap items-center text-xs md:text-sm text-gray-500 mb-3 gap-1 md:gap-0">
                        <i class="fas fa-calendar-alt mr-1 md:mr-2"></i>
                        <span>February 20, 2024</span>
                        <span class="mx-1 md:mx-2">•</span>
                        <i class="fas fa-eye mr-1 md:mr-2"></i>
                        <span>876 views</span>
                    </div>
                    <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-3 hover:text-[#247646] transition-colors">
                        <a href="news-detail.php?id=5">ELECT Research Team Publishes Findings in International Journal</a>
                    </h3>
                    <p class="text-gray-600 mb-4 text-sm md:text-base">
                        Research findings from the ELECT project have been published in the prestigious "Energy Efficiency" international journal.
                    </p>
                    <a href="news-detail.php?id=5" class="inline-flex items-center text-[#fdbf30] font-semibold hover:text-[#247646] transition-colors text-sm md:text-base">
                        Read Full Story
                    </a>
                </div>
                <!-- Fade line separator -->
                <div class="h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent w-full mt-4 md:hidden"></div>
            </article>
            
            <!-- News Item 6 -->
            <article class="news-item md:rounded overflow-hidden border border-gray-200 transition duration-300" data-category="training" data-date="2024-02-15" data-views="1123">
                <div class="relative w-full">
                    <img src="../assets/images/About.jpg" alt="Curriculum Development" class="w-full h-48 md:h-48 object-cover">
                </div>
                <div class="p-4 md:p-6">
                    <div class="flex flex-wrap items-center text-xs md:text-sm text-gray-500 mb-3 gap-1 md:gap-0">
                        <i class="fas fa-calendar-alt mr-1 md:mr-2"></i>
                        <span>February 15, 2024</span>
                        <span class="mx-1 md:mx-2">•</span>
                        <i class="fas fa-eye mr-1 md:mr-2"></i>
                        <span>1,123 views</span>
                    </div>
                    <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-3 hover:text-[#247646] transition-colors">
                        <a href="news-detail.php?id=6">New Curriculum Materials for Energy-Efficient Lighting Released</a>
                    </h3>
                    <p class="text-gray-600 mb-4 text-sm md:text-base">
                        Comprehensive educational resources for energy-efficient lighting now available for all partner universities.
                    </p>
                    <a href="news-detail.php?id=6" class="inline-flex items-center text-[#fdbf30] font-semibold hover:text-[#247646] transition-colors text-sm md:text-base">
                        Read Full Story
                    </a>
                </div>
                <!-- Fade line separator -->
                <div class="h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent w-full mt-4 md:hidden"></div>
            </article>
            
            <!-- News Item 7 -->
            <article class="news-item md:rounded overflow-hidden border border-gray-200 transition duration-300" data-category="events" data-date="2024-02-10" data-views="765">
                <div class="relative w-full">
                    <img src="../assets/images/news1.jpg" alt="Industry Meeting" class="w-full h-48 md:h-48 object-cover">
                </div>
                <div class="p-4 md:p-6">
                    <div class="flex flex-wrap items-center text-xs md:text-sm text-gray-500 mb-3 gap-1 md:gap-0">
                        <i class="fas fa-calendar-alt mr-1 md:mr-2"></i>
                        <span>February 10, 2024</span>
                        <span class="mx-1 md:mx-2">•</span>
                        <i class="fas fa-eye mr-1 md:mr-2"></i>
                        <span>765 views</span>
                    </div>
                    <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-3 hover:text-[#247646] transition-colors">
                        <a href="news-detail.php?id=7">Industry Advisory Board Meeting Strengthens Partnerships</a>
                    </h3>
                    <p class="text-gray-600 mb-4 text-sm md:text-base">
                        Industry stakeholders gathered to discuss curriculum alignment and future collaboration opportunities.
                    </p>
                    <a href="news-detail.php?id=7" class="inline-flex items-center text-[#fdbf30] font-semibold hover:text-[#247646] transition-colors text-sm md:text-base">
                        Read Full Story
                    </a>
                </div>
                <!-- Fade line separator -->
                <div class="h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent w-full mt-4 md:hidden"></div>
            </article>
            
            <!-- News Item 8 -->
            <article class="news-item md:rounded overflow-hidden border border-gray-200 transition duration-300" data-category="research" data-date="2024-02-05" data-views="1432">
                <div class="relative w-full">
                    <img src="../assets/images/news2.jpg" alt="Pilot Results" class="w-full h-48 md:h-48 object-cover">
                </div>
                <div class="p-4 md:p-6">
                    <div class="flex flex-wrap items-center text-xs md:text-sm text-gray-500 mb-3 gap-1 md:gap-0">
                        <i class="fas fa-calendar-alt mr-1 md:mr-2"></i>
                        <span>February 5, 2024</span>
                        <span class="mx-1 md:mx-2">•</span>
                        <i class="fas fa-eye mr-1 md:mr-2"></i>
                        <span>1,432 views</span>
                    </div>
                    <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-3 hover:text-[#247646] transition-colors">
                        <a href="news-detail.php?id=8">Pilot Installation Results Show 40% Energy Reduction</a>
                    </h3>
                    <p class="text-gray-600 mb-4 text-sm md:text-base">
                        Initial results from pilot installations across three universities demonstrate significant energy savings.
                    </p>
                    <a href="news-detail.php?id=8" class="inline-flex items-center text-[#fdbf30] font-semibold hover:text-[#247646] transition-colors text-sm md:text-base">
                        Read Full Story
                    </a>
                </div>
                <!-- Fade line separator -->
                <div class="h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent w-full mt-4 md:hidden"></div>
            </article>
            
            <!-- News Item 9 -->
            <article class="news-item md:rounded overflow-hidden border border-gray-200 transition duration-300" data-category="collaboration" data-date="2024-01-30" data-views="998">
                <div class="relative w-full">
                    <img src="../assets/images/news1.jpg" alt="Student Exchange" class="w-full h-48 md:h-48 object-cover">
                </div>
                <div class="p-4 md:p-6">
                    <div class="flex flex-wrap items-center text-xs md:text-sm text-gray-500 mb-3 gap-1 md:gap-0">
                        <i class="fas fa-calendar-alt mr-1 md:mr-2"></i>
                        <span>January 30, 2024</span>
                        <span class="mx-1 md:mx-2">•</span>
                        <i class="fas fa-eye mr-1 md:mr-2"></i>
                        <span>998 views</span>
                    </div>
                    <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-3 hover:text-[#247646] transition-colors">
                        <a href="news-detail.php?id=9">Student Exchange Program with European Universities Announced</a>
                    </h3>
                    <p class="text-gray-600 mb-4 text-sm md:text-base">
                        New student exchange program offers opportunities for Zambian students to study at European partner institutions.
                    </p>
                    <a href="news-detail.php?id=9" class="inline-flex items-center text-[#fdbf30] font-semibold hover:text-[#247646] transition-colors text-sm md:text-base">
                        Read Full Story
                    </a>
                </div>
                <div class="h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent w-full mt-4 md:hidden hidden"></div>
            </article>
        </div>
        
        <!-- Load More Button -->
        <div class="text-center mt-8 md:mt-12">
            <button id="loadMoreBtn" class="bg-[#247646] hover:bg-red-700 text-white px-6 py-2.5 md:px-8 md:py-3 rounded font-semibold transition-colors duration-300 text-sm md:text-base">
                <i class="fas fa-plus mr-2"></i>
                Load More News
            </button>
            <div id="loadingIndicator" class="hidden mt-4">
                <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"></div>
                <span class="ml-2 text-gray-600">Loading more news...</span>
            </div>
        </div>
        
        <!-- Pagination Info -->
        <div class="mt-8 text-center text-gray-600 text-sm md:text-base">
            Showing <span id="currentCount">9</span> of <span id="totalCount">24</span> news articles
        </div>
    </div>
</section>

<!-- SIDEBAR SECTIONS -->
<div class="bg-gray-50 py-8 md:py-16">
    <div class="max-w-7xl mx-auto px-4 md:px-6">
        <!-- Fade line separator between main content and sidebar -->
        <div class="h-px bg-gradient-to-r from-transparent via-gray-400 to-transparent w-full mb-8 md:mb-12"></div>
        
        <div class="grid lg:grid-cols-3 gap-8 md:gap-12">
            <!-- Most Popular News -->
            <div class="lg:col-span-2">
                <h3 class="text-xl md:text-2xl font-bold mb-6 pb-3 border-b">Most Popular News</h3>
                <div class="space-y-6">
                    <article class="flex items-start gap-3 md:gap-4 p-3 md:p-4">
                        <img src="../assets/images/news3.jpg" alt="Popular News" class="w-20 h-20 md:w-24 md:h-24 object-cover">
                        <div class="flex-1">
                            <h4 class="font-semibold text-base md:text-lg mb-2">
                                <a href="news-detail.php?id=10" class="text-gray-900 hover:text-[#247646]">EU Funding Extension Approved for ELECT Project</a>
                            </h4>
                            <div class="flex flex-wrap items-center text-xs md:text-sm text-gray-500 gap-2">
                                <span>3,456 views</span>
                                <span>March 1, 2024</span>
                            </div>
                        </div>
                    </article>
                    
                    <article class="flex items-start gap-3 md:gap-4 p-3 md:p-4">
                        <img src="../assets/images/news1.jpg" alt="Popular News" class="w-20 h-20 md:w-24 md:h-24 object-cover">
                        <div class="flex-1">
                            <h4 class="font-semibold text-base md:text-lg mb-2">
                                <a href="news-detail.php?id=11" class="text-gray-900 hover:text-[#247646]">National Conference on Energy Efficiency Announced</a>
                            </h4>
                            <div class="flex flex-wrap items-center text-xs md:text-sm text-gray-500 gap-2">
                                <span>2,987 views</span>
                                <span>February 25, 2024</span>
                            </div>
                        </div>
                    </article>
                    
                    <article class="flex items-start gap-3 md:gap-4 p-3 md:p-4">
                        <img src="../assets/images/news2.jpg" alt="Popular News" class="w-20 h-20 md:w-24 md:h-24 object-cover">
                        <div class="flex-1">
                            <h4 class="font-semibold text-base md:text-lg mb-2">
                                <a href="news-detail.php?id=12" class="text-gray-900 hover:text-[#247646]">ELECT Project Featured in National Newspaper</a>
                            </h4>
                            <div class="flex flex-wrap items-center text-xs md:text-sm text-gray-500 gap-2">
                                <span>2,543 views</span>
                                <span>February 20, 2024</span>
                            </div>
                        </div>
                    </article>
                </div>
            </div>
            
            <!-- Newsletter Subscription -->
            <div class="bg-white p-4 md:p-6 rounded-lg">
                <h3 class="text-xl md:text-2xl font-bold mb-4">Stay Updated</h3>
                <p class="text-gray-600 mb-6 text-sm md:text-base">Subscribe to our newsletter to receive the latest news and updates from the ELECT project directly in your inbox.</p>
                
                <form id="newsletterForm" class="space-y-4">
                    <div>
                        <input type="email" id="newsletterEmail" placeholder="Your email address" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm md:text-base" required>
                    </div>
                    <button type="submit" class="w-full bg-[#247646] text-white py-3 rounded-lg font-semibold transition-colors duration-300 text-sm md:text-base">
                        Subscribe Now
                    </button>
                </form>
                
                <p class="text-xs md:text-sm text-center text-gray-500 mt-4">We respect your privacy. Unsubscribe at any time.</p>
            </div>
        </div>
    </div>
</div>

<?php include '../includes/footer.php'; ?>

<!-- JavaScript for News Page -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Elements
    const filterBtns = document.querySelectorAll('.filter-btn');
    const newsItems = document.querySelectorAll('.news-item');
    const searchInput = document.getElementById('searchNews');
    const sortSelect = document.getElementById('sortNews');
    const loadMoreBtn = document.getElementById('loadMoreBtn');
    const loadingIndicator = document.getElementById('loadingIndicator');
    const currentCount = document.getElementById('currentCount');
    const totalCount = document.getElementById('totalCount');
    
    // Newsletter Form
    const newsletterForm = document.getElementById('newsletterForm');
    
    // Initial counts
    const totalItems = 24; // Total number of news items
    let visibleItems = 9; // Initially visible items
    let currentFilter = 'all';
    let currentSearch = '';
    let currentSort = 'newest';
    
    // Filter functionality
    filterBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            // Update active button
            filterBtns.forEach(b => {
                b.classList.remove('active', 'bg-[#247646]', 'text-white');
                b.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            this.classList.add('active', 'bg-[#247646]', 'text-white');
            this.classList.remove('bg-gray-200', 'text-gray-700');
            
            currentFilter = this.dataset.filter;
            filterAndSortNews();
        });
    });
    
    // Search functionality
    searchInput.addEventListener('input', function() {
        currentSearch = this.value.toLowerCase().trim();
        filterAndSortNews();
    });
    
    // Sort functionality
    sortSelect.addEventListener('change', function() {
        currentSort = this.value;
        filterAndSortNews();
    });
    
    // Filter and sort news
    function filterAndSortNews() {
        let filteredItems = Array.from(newsItems);
        
        // Apply filter
        if (currentFilter !== 'all') {
            filteredItems = filteredItems.filter(item => 
                item.dataset.category === currentFilter
            );
        }
        
        // Apply search
        if (currentSearch) {
            filteredItems = filteredItems.filter(item => {
                const title = item.querySelector('h3 a').textContent.toLowerCase();
                const description = item.querySelector('p').textContent.toLowerCase();
                return title.includes(currentSearch) || description.includes(currentSearch);
            });
        }
        
        // Apply sorting
        filteredItems.sort((a, b) => {
            switch(currentSort) {
                case 'newest':
                    return new Date(b.dataset.date) - new Date(a.dataset.date);
                case 'oldest':
                    return new Date(a.dataset.date) - new Date(b.dataset.date);
                case 'popular':
                    return parseInt(b.dataset.views) - parseInt(a.dataset.views);
                default:
                    return 0;
            }
        });
        
        // Hide all items first
        newsItems.forEach(item => {
            item.style.display = 'none';
        });
        
        // Show filtered items (up to visibleItems count)
        filteredItems.slice(0, visibleItems).forEach(item => {
            item.style.display = 'block';
        });
        
        // Update counters
        currentCount.textContent = Math.min(visibleItems, filteredItems.length);
        totalCount.textContent = filteredItems.length;
        
        // Show/hide load more button
        loadMoreBtn.style.display = visibleItems < filteredItems.length ? 'block' : 'none';
    }
    
    // Load more functionality
    loadMoreBtn.addEventListener('click', function() {
        loadingIndicator.classList.remove('hidden');
        loadMoreBtn.style.display = 'none';
        
        // Simulate loading delay
        setTimeout(() => {
            visibleItems += 3;
            filterAndSortNews();
            loadingIndicator.classList.add('hidden');
            
            // Smooth scroll to newly loaded items
            const lastItem = document.querySelector('.news-item[style="display: block;"]:last-child');
            if (lastItem) {
                lastItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }, 1000);
    });
    
    // Newsletter form submission
    newsletterForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const email = document.getElementById('newsletterEmail').value;
        
        // Here you would typically send this to your server
        alert(`Thank you for subscribing with email: ${email}. You will receive updates shortly.`);
        this.reset();
    });
    
    // Initialize
    filterAndSortNews();
    
    // Add keyboard shortcut for search
    document.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
            e.preventDefault();
            searchInput.focus();
        }
    });
});
</script>